"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[6970],{55433:function(U,p,e){e.d(p,{r:function(){return g}});var o=e(32735),l=e(60216),m=e.n(l),h=e(74506),v=e(72850);function E(c,T,a){if(!c||!T)return{display:"none"};const{x:d,y:C}=a;return{transform:`translate(${d}px, ${C}px)`}}function g({renderItem:c}){const{itemType:T,isDragging:a,item:d,initialOffset:C,currentOffset:k,mouseOffset:B}=(0,h.useDragLayer)(P=>({item:P.getItem(),itemType:P.getItemType(),initialOffset:P.getInitialSourceClientOffset(),currentOffset:P.getSourceClientOffset(),isDragging:P.isDragging(),mouseOffset:P.getClientOffset()}));return a?o.createElement(v.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},o.createElement(v.x,{style:E(C,k,B)},c({type:T,item:d}))):null}g.propTypes={renderItem:m().func.isRequired}},73386:function(U,p,e){var o=e(32735);const l=(0,o.createContext)();var m=null},56327:function(U,p,e){e.d(p,{PL:function(){return v},Y9:function(){return Te.Y},zE:function(){return J},Ky:function(){return r},fi:function(){return D},zH:function(){return ge},r5:function(){return V}});var o=e(32735),l=e(15062),m=e(70031),v=()=>{const t=(0,l.v9)(m.Z),s=(0,o.useCallback)(n=>t?.components?.[n]??{},[t]);return{...t,getComponentLayout:s}},E=e(84306),g=e(24989),c=e(99381),T=e.n(c),a=e(33795),d=e.n(a),C=e(3040),k=e.n(C),B=e(95952);const P=(t,s)=>s.find(n=>n.uid===t),G=(t,s)=>{const n=w(t,s),i=H(n.contentType,s),O=q(n.contentType,n.components);return k()(n,["contentType","layouts","edit"],i),k()(n,["contentType","layouts","list"],O),Object.keys(n.components).forEach(f=>{const A=H(n.components[f],s);k()(n,["components",f,"layouts","edit"],A)}),n},w=(t,s)=>{const n=(0,B.w8)(T()(t),s,"contentType"),{components:i,contentType:O}=n,f=A=>Object.keys(A.metadatas).reduce((W,I)=>{const b=d()(A,["attributes",I],{});let x=A.metadatas[I];if(b.type==="relation"){const fe=P(b.targetModel,s),j=x.edit.mainField,z={name:j,schema:d()(fe,["attributes",j])};x={list:{...x.list,mainField:z},edit:{...x.edit,mainField:z}}}return W[I]=x,W},{});return k()(n,["contentType","metadatas"],f(O)),Object.keys(i).forEach(A=>{const W=i[A],I=f(W);k()(n,["components",A,"metadatas"],I)}),n},H=(t,s)=>t.layouts.edit.reduce((n,i)=>{const O=i.map(f=>{const A=d()(t,["attributes",f.name],{}),W={...f,fieldSchema:A,metadatas:d()(t,["metadatas",f.name,"edit"],{})};if(A.type==="relation"){const b=P(A.targetModel,s).pluginOptions||{};k()(W,"targetModelPluginOptions",b),k()(W,"queryInfos",{shouldDisplayRelationLink:re(t,f.name,s)})}return W});return n.push(O),n},[]),q=(t,s)=>t.layouts.list.reduce((i,O)=>{const f=d()(t,["attributes",O],{}),A=d()(t,["metadatas",O,"list"],{}),W=f.type;if(W==="relation")return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:A}),i;if(W==="component"){const I=s[f.component],b=I.settings.mainField,x=I.attributes[b];return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:{...A,mainField:{...x,name:b}}}),i}return i.push({key:`__${O}_key__`,name:O,fieldSchema:f,metadatas:A}),i},[]),re=(t,s,n)=>{const i=d()(t,["attributes",s,"targetModel"],"");return ee(n).includes(i)},ee=t=>t.filter(s=>s.isDisplayed).map(({uid:s})=>s);var X=G,te=e(97889);const K={error:null,isLoading:!0,layout:{},layouts:{}};var Q=(t,s)=>(0,te.ZP)(t,n=>{switch(s.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const i=s.data.contentType.uid;n.layout=s.data,n.layouts[i]=s.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=s.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=t.layouts[s.uid];break}case"UPDATE_LAYOUT":{const i=t.layout;n.layout={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}},n.layouts[i.contentType.uid]={...i,contentType:{uid:i.contentType.uid,...s.newLayout.contentType}};break}default:return n}}),Y=e(42882),J=t=>{const[{error:s,isLoading:n,layout:i,layouts:O},f]=(0,o.useReducer)(Q,K),A=(0,o.useMemo)(Y.Vo,[]),{schemas:W}=(0,l.v9)(j=>A(j),l.wU),I=(0,o.useRef)(!0),{get:b}=(0,g.kY)(),x=(0,o.useCallback)(async(j,z)=>{if(O[j]){f({type:"SET_LAYOUT_FROM_STATE",uid:j});return}f({type:"GET_DATA"});try{const{data:{data:oe}}=await b(`/content-manager/content-types/${j}/configuration`,{cancelToken:z.token});f({type:"GET_DATA_SUCCEEDED",data:X(oe,W)})}catch(oe){if(E.default.isCancel(oe))return;I.current&&console.error(oe),I.current&&f({type:"GET_DATA_ERROR",error:oe})}},[O,W,b]);(0,o.useEffect)(()=>()=>{I.current=!1},[]),(0,o.useEffect)(()=>{const z=E.default.CancelToken.source();return x(t,z),()=>{z.cancel("Operation canceled by the user.")}},[t,x]);const fe=(0,o.useCallback)(j=>{f({type:"UPDATE_LAYOUT",newLayout:X(j,W)})},[W]);return{error:s,isLoading:n,layout:i,updateLayout:fe}},_=t=>t["content-manager_app"].collectionTypeLinks,Z=e(33348),ie=e(85973),me=e.n(ie);const ue=(t,s)=>Object.keys(t).reduce((n,i)=>{const O=t[i],f=d()(s,[i],O);return me()(O)?{...n,[i]:ue(O,f)}:(n[i]=f,n)},{});var ye=(t,s,n)=>{const i=t.find(({to:x})=>x.includes(s));if(!i)return"/";const{to:O,search:f}=i,A=(0,Z.parse)(f),W=(0,Z.parse)(n.substring(1)),I=ue(A,W);return`${O}?${(0,Z.stringify)(I,{encode:!1})}`},r=t=>{const[{rawQuery:s}]=(0,g.Kx)(),n=(0,l.v9)(_);return ye(n,t,s)},u=e(53038),D=()=>{const{search:t}=(0,u.TH)(),s=t?(0,Z.parse)(t.substring(1)):{};return s.plugins?(0,Z.stringify)({plugins:s.plugins},{encode:!1}):""},F=e(89334);const N=(t,s,n)=>({type:F.m,permissions:t,__meta__:{plugins:s,containerName:n}}),R=()=>({type:F.Q}),L=t=>t["content-manager_rbacManager"].permissions,M=t=>t.rbacProvider.collectionTypesRelatedPermissions;var V=(t,s,n="listView")=>{const i=(0,l.v9)(M),O=(0,l.v9)(L),f=(0,l.I0)(),A=i[s];return(0,o.useEffect)(()=>A?(f(N(A,t?t.plugins:null,n)),()=>{f(R())}):()=>{},[A,f,t,n]),O},ce=e(73386);const $=()=>useContext(WysiwygContext);var se=null;const ge=t=>{const s=(0,o.useRef)();return(0,o.useEffect)(()=>{s.current=t},[t]),s.current};var Te=e(90553),ve=e(18777)},90553:function(U,p,e){e.d(p,{Y:function(){return v}});var o=e(32735),l=e(74506),m=e.n(l),h=e(18777);const v=(E,{type:g="STRAPI_DND",index:c,item:T={},onStart:a,onEnd:d,onGrabItem:C,onDropItem:k,onCancel:B,onMoveItem:P,dropSensitivity:G="regular"})=>{const w=(0,o.useRef)(null),[{handlerId:H},q]=(0,l.useDrop)({accept:g,collect(K){return{handlerId:K.getHandlerId()}},hover(K,ae){if(!w.current)return;const Q=K.index,Y=c;if(Q!==Y){if(G==="regular"){const ne=w.current.getBoundingClientRect(),J=(ne.bottom-ne.top)/2,_=ae.getClientOffset().y-ne.top;if(Q<Y&&_<J||Q>Y&&_>J)return}P(Y,Q),K.index=Y}}}),[{isDragging:re},ee,X]=(0,l.useDrag)({type:g,item(){a&&a();const{width:K}=w.current?.getBoundingClientRect()??{};return{index:c,width:K,...T}},end(){d&&d()},canDrag:E,isDragging:T.id?K=>T.id===K.getItem().id:void 0,collect:K=>({isDragging:K.isDragging()})}),te=(0,h.A)(E,c,{onGrabItem:C,onDropItem:k,onCancel:B,onMoveItem:P});return[{handlerId:H,isDragging:re,handleKeyDown:te},w,q,ee,X]}},18777:function(U,p,e){e.d(p,{A:function(){return l}});var o=e(32735);const l=(m,h,{onCancel:v,onDropItem:E,onGrabItem:g,onMoveItem:c})=>{const[T,a]=(0,o.useState)(!1),d=P=>{T&&(P==="UP"?c(h-1,h):P==="DOWN"&&c(h+1,h))},C=()=>{T?(E&&E(h),a(!1)):(g&&g(h),a(!0))},k=()=>{T&&(a(!1),v&&v(h))};return P=>{if(m&&!(P.key==="Tab"&&!T))switch(P.preventDefault(),P.key){case" ":case"Enter":C();break;case"Escape":k();break;case"ArrowDown":case"ArrowRight":d("DOWN");break;case"ArrowUp":case"ArrowLeft":d("UP");break;default:}}}},42882:function(U,p,e){e.d(p,{Jg:function(){return c},KQ:function(){return E},Vo:function(){return g},Yg:function(){return m}});var o=e(98178),l=e(34947);const m=()=>a=>a["content-manager_app"]||l.E,h=()=>createSelector(m(),a=>a),v=()=>createSelector(m(),a=>a.models),E=()=>(0,o.P1)(m(),a=>({collectionTypeLinks:a.collectionTypeLinks,singleTypeLinks:a.singleTypeLinks})),g=()=>(0,o.P1)(m(),({components:a,models:d})=>({schemas:[...a,...d]})),c=(0,o.P1)(m(),a=>a.fieldSizes);var T=null},70031:function(U,p){const e=o=>o["content-manager_editViewLayoutManager"].currentLayout;p.Z=e},25708:function(U,p){p.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},47510:function(U,p){const e=o=>`content-manager.${o}`;p.Z=e},95952:function(U,p,e){e.d(p,{_Q:function(){return _.Z},W3:function(){return h},ko:function(){return c},FE:function(){return a},Di:function(){return B},du:function(){return H},TA:function(){return ee},Ts:function(){return ae},Uo:function(){return Y},IF:function(){return J},OB:function(){return de.Z},w8:function(){return ue},kc:function(){return pe}});var o=e(99381),l=e.n(o),h=(r,u,y)=>{if(Array.isArray(r)&&u>=0&&y>=0&&u<=r.length-1&&y<=r.length-1){const D=l()(r),F=D.splice(u,1);return D.splice(y,0,F[0]),D}return r},v=e(59578),E=e.n(v),c=r=>{const u=r.type;return u==="relation"?!E()(r.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(u)&&!!u};const T=(r,u)=>{typeof r=="function"?r(u):r!=null&&(r.current=u)},a=(...r)=>u=>r.forEach(y=>T(y,u));var d=e(33795),C=e.n(d);const k=(r,u)=>Object.keys(r).reduce((y,D)=>{const F=C()(r,[D],{}),{default:N,component:R,type:L,required:M,min:S,repeatable:V}=F;if(N!==void 0&&(y[D]=N),L==="component"){const ce=u?.[R]?.attributes??{},$=k(ce,u);if(M===!0&&(y[D]=V===!0?[]:$),S&&V===!0&&M){y[D]=[];for(let se=0;se<S;se+=1)y[D].push($)}}return L==="dynamiczone"&&M===!0&&(y[D]=[]),y},{});var B=k,P=e(9086),G=e.n(P),H=({layouts:r,metadatas:u,...y})=>{const D=r.list.map(R=>R.name?R.name:R),F=Object.keys(u).reduce((R,L)=>{const M=C()(u,[L],{});let S=M.edit;return S.mainField&&(S={...S,mainField:M.edit.mainField.name}),{...R,[L]:{edit:S,list:G()(M.list,["mainField"])}}},{}),N=r.edit.map(R=>R.map(({name:L,size:M})=>({name:L,size:M})));return{...y,layouts:{edit:N,list:D},metadatas:F}};const q=(r,u)=>r.map(y=>({...y,subject:u}));var ee=r=>{const u={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(u).reduce((y,D)=>(y[D]=q(u[D],r),y),{})},X=e(95919),te=e.n(X),ae=r=>r.split(".").filter(u=>te()(parseInt(u,10))),Y=r=>{if(r.length===0)return-1;const u=Math.max.apply(Math,r.map(y=>y.__temp_key__??0));return Number.isNaN(u)?-1:u},J=r=>`/content-manager/${r}`,de=e(47510),_=e(25708),Z=e(3040),ie=e.n(Z),ue=(r,u,y)=>{const D=L=>u.find(M=>M.uid===L),F=Object.assign({},r),N=r[y].uid,R=D(N);return ie()(F,[y],{...r[y],...R}),Object.keys(r.components).forEach(L=>{const M=D(L);ie()(F,["components",L],{...r.components[L],...M})}),F},le=e(24989),pe=(r,u,y)=>{const D=(F,N)=>Object.keys(F).reduce((R,L)=>{const M=(0,le.UN)(N,L),S=C()(F,L),V=(0,le.k2)(N,[L,"component"]),ce=(0,le.k2)(N,[L,"repeatable"]);return M==="dynamiczone"?(R[L]=S.map($=>D($,y[$.__component])),R):M==="component"?(ce?R[L]=S&&S.map($=>D($,y[V])):R[L]=S&&D(S,y[V]),R):(M!=="password"&&(R[L]=S),R)},{});return D(r,u)}},28315:function(U,p,e){e.d(p,{K:function(){return c}});var o=e(32735),l=e(60216),m=e.n(l),h=e(67582),v=e(87933),E=e(49372),g=e(54504);function c({children:T,...a}){const{color:d}=a.data,{themeColorName:C}=(0,g.k)(d);return o.createElement(h.c.Option,{...a},o.createElement(v.k,{alignItems:"center",gap:2},o.createElement(v.k,{height:2,background:d,borderColor:C==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(E.Z,{textColor:"neutral800",ellipsis:!0},T)))}c.propTypes={children:m().node.isRequired,data:m().shape({color:m().string}).isRequired}},8445:function(U,p,e){e.d(p,{R:function(){return c}});var o=e(32735),l=e(60216),m=e.n(l),h=e(67582),v=e(87933),E=e(49372),g=e(54504);function c({children:T,...a}){const{color:d}=a.data,{themeColorName:C}=d?(0,g.k)(d):{};return o.createElement(h.c.SingleValue,{...a},o.createElement(v.k,{alignItems:"center",gap:2},o.createElement(v.k,{height:2,background:d,borderColor:C==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),o.createElement(E.Z,{textColor:"neutral800",ellipsis:!0},T)))}c.defaultProps={children:null},c.propTypes={children:m().node,data:m().shape({color:m().string}).isRequired}},61937:function(U,p,e){e.d(p,{$k:function(){return g},FT:function(){return T},Nj:function(){return E},Ot:function(){return v},QM:function(){return m},lv:function(){return c},sN:function(){return l},uL:function(){return a},x4:function(){return h}});var o=e(12301);const l="settings_review-workflows",m="Settings/Review_Workflows/SET_WORKFLOWS",h="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",v="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",g="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",c={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},T=o.W.colors.primary600,a={STAGE:"stage"}},67350:function(U,p,e){e.d(p,{n:function(){return v}});var o=e(20108),l=e(24989),m=e(33348),h=e.n(m);function v(E={}){const{id:g="",...c}=E,T={populate:"stages"},{get:a}=(0,l.kY)(),d=(0,m.stringify)({...T,...c},{encode:!1}),{data:C,isLoading:k,status:B,refetch:P}=(0,o.useQuery)(["review-workflows","workflows",g],async()=>{try{const{data:{data:w}}=await a(`/admin/review-workflows/workflows/${g}${d?`?${d}`:""}`);return w}catch{return null}});let G=[];return g&&C?G=[C]:Array.isArray(C)&&(G=C),{workflows:G,isLoading:k,status:B,refetch:P}}},54504:function(U,p,e){e.d(p,{k:function(){return m},s:function(){return h}});var o=e(12301),l=e(61937);function m(v){if(!v)return null;const g=Object.entries(o.W.colors).filter(([,c])=>c.toUpperCase()===v.toUpperCase()).reduce((c,[T])=>(l.lv?.[T]&&(c=T),c),null);return g?{themeColorName:g,name:l.lv[g]}:null}function h(){return Object.entries(l.lv).map(([v,E])=>({hex:o.W.colors[v].toUpperCase(),name:E}))}}}]);
